(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(14),s=n.n(r),c=n(23),i=n(6),o=n(1),l=function(e){var t=e.title,n=e.icon,r=Object(i.f)(),s=Object(o.jsx)(a.Fragment,{children:Object(o.jsx)("li",{children:Object(o.jsxs)(c.b,{onClick:function(){localStorage.removeItem("token")},to:"/login",children:[Object(o.jsx)("i",{className:"fas fa-sign-out-alt"})," ",Object(o.jsx)("span",{className:"hide-sm",children:"Logout"})]})})}),l=Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)("li",{children:Object(o.jsx)(c.b,{to:"/register",children:"Register"})}),Object(o.jsx)("li",{children:Object(o.jsx)(c.b,{to:"/login",children:"Login"})})]});return Object(o.jsxs)("div",{className:"navbar bg-primary",children:[Object(o.jsx)("h1",{children:Object(o.jsxs)(c.b,{to:"/",children:[Object(o.jsx)("i",{className:n})," ",t]})}),Object(o.jsx)("ul",{children:"/login"===r.pathname||"/register"===r.pathname?l:s})]})};l.defaultProps={title:"Contact Keeper",icon:"fas fa-id-card-alt"};var u=l,d=n(142),j=n(140),p=n(11),b=n(27),m=n(12),h=n.n(m),g=n(19),f=n(28),O=n.n(f),x=n(91),v=function(e,t,n){x.a[e]({message:t,description:n})},C=Object(g.b)("contact/getContact",function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,r,s,c,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=5,O.a.get("/contacts",r);case 5:return s=e.sent,e.abrupt("return",s.data.contacts);case 9:return e.prev=9,e.t0=e.catch(0),"Session expires login again!"!==(o=(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message)||e.t0.message||e.t0.toString())&&"Invalid token Please Login again!"!==o||(v("error","Failed",o),localStorage.removeItem("token"),t("/login")),e.abrupt("return",n.rejectWithValue(o));case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),y=Object(g.b)("contact/createContact",function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,r,s,c,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=5,O.a.post("/contacts",t,r);case 5:return s=e.sent,e.abrupt("return",s.data.message);case 9:return e.prev=9,e.t0=e.catch(0),o=(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message)||e.t0.message||e.t0.toString(),e.abrupt("return",n.rejectWithValue(o));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),S=Object(g.b)("contact/updateContact",function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,r,s,c,i,o,l,u,d,j,p;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.name,r=t.email,s=t.phone,c=t.type,i=t._id,e.prev=1,o=localStorage.getItem("token"),l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}},e.next=6,O.a.patch("/contacts/".concat(i),{name:a,email:r,phone:s,type:c},l);case 6:return u=e.sent,e.abrupt("return",u.data.message);case 10:return e.prev=10,e.t0=e.catch(1),p=(null===e.t0||void 0===e.t0||null===(d=e.t0.response)||void 0===d||null===(j=d.data)||void 0===j?void 0:j.message)||e.t0.message||e.t0.toString(),e.abrupt("return",n.rejectWithValue(p));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,n){return e.apply(this,arguments)}}()),w=Object(g.b)("contact/deleteContact",function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,r,s,c,i,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=localStorage.getItem("token"),r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}},e.next=5,O.a.delete("/contacts/".concat(t),r);case 5:return s=e.sent,e.abrupt("return",s.data.message);case 9:return e.prev=9,e.t0=e.catch(0),o=(null===e.t0||void 0===e.t0||null===(c=e.t0.response)||void 0===c||null===(i=c.data)||void 0===i?void 0:i.message)||e.t0.message||e.t0.toString(),e.abrupt("return",n.rejectWithValue(o));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}()),k=Object(g.c)({name:"contact",initialState:{isLoading:!1,isSuccess:!1,isError:!1,isMessage:null,isLoadingContactCreate:!1,isSuccessContactCreate:!1,isErrorContactCreate:!1,isMessageContactCreate:null,isErrorContactDelete:!1,contacts:[],contactDetails:null,filterValue:""},reducers:{reset:function(e,t){e.isLoading=!1,e.isSuccess=!1,e.isError=!1,e.isMessage=!1,e.isLoadingContactCreate=!1,e.isSuccessContactCreate=!1,e.isErrorContactCreate=!1,e.isMessageContactCreate=null,e.isErrorContactDelete=!1},setContact:function(e,t){e.contactDetails=t.payload},setFilterValue:function(e,t){e.filterValue=t.payload}},extraReducers:function(e){e.addCase(C.pending,(function(e,t){e.isLoading=!0})).addCase(C.fulfilled,(function(e,t){e.isLoading=!1,e.contacts=t.payload})).addCase(C.rejected,(function(e,t){e.isLoading=!1,e.isError=!0})).addCase(y.pending,(function(e,t){e.isLoadingContactCreate=!0})).addCase(y.fulfilled,(function(e,t){e.isLoadingContactCreate=!1,e.isSuccessContactCreate=!0,e.isMessageContactCreate=t.payload})).addCase(y.rejected,(function(e,t){e.isLoadingContactCreate=!1,e.isErrorContactCreate=!0,e.isMessageContactCreate=t.payload})).addCase(S.pending,(function(e,t){e.isLoadingContactCreate=!0})).addCase(S.fulfilled,(function(e,t){e.isLoadingContactCreate=!1,e.isSuccessContactCreate=!0,e.isMessageContactCreate=t.payload,e.contactDetails=null})).addCase(S.rejected,(function(e,t){e.isLoadingContactCreate=!1,e.isErrorContactCreate=!0,e.isMessageContactCreate=t.payload})).addCase(w.pending,(function(e,t){e.isLoading=!0})).addCase(w.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,e.isMessage=t.payload})).addCase(w.rejected,(function(e,t){e.isLoading=!1,e.isErrorContactDelete=!0,e.isMessage=t.payload}))}}),L=k.actions,N=L.reset,E=L.setContact,F=L.setFilterValue,M=k.reducer,I=function(e){var t=e.contact,n=t._id,a=t.name,r=t.email,s=t.phone,c=t.type,i=Object(p.b)();return Object(o.jsxs)("div",{className:"card bg-light",children:[Object(o.jsxs)("h3",{className:"text-primary text-left",children:[a," ",Object(o.jsx)("span",{style:{float:"right"},className:"badge "+("professional"===c?"badge-success":"badge-primary"),children:c.charAt(0).toUpperCase()+c.slice(1)})]}),Object(o.jsxs)("ul",{className:"list",children:[r&&Object(o.jsxs)("li",{children:[Object(o.jsx)("i",{className:"fas fa-envelope-open"})," ",r]}),s&&Object(o.jsxs)("li",{children:[Object(o.jsx)("i",{className:"fas fa-phone"})," ",s]})]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("button",{className:"btn btn-dark btn-sm",onClick:function(){return i(E(t))},children:"Edit"}),Object(o.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return i(w(n))},children:"Delete"})]})]})},A=n(141),D=n(139),P=function(){var e=Object(p.c)((function(e){return e.contact})),t=e.isLoading,n=e.isSuccess,r=e.isError,s=e.isMessage,c=e.isErrorContactDelete,l=e.contacts,u=e.filterValue,b=Object(p.b)(),m=Object(i.g)();Object(a.useEffect)((function(){return n&&v("success","Success",s),c&&v("error","Failed",s),b(C(m)),function(){return b(N())}}),[n,c,b,s,m]);var h=l.filter((function(e){return u?(null===e||void 0===e?void 0:e.name)===u||(null===e||void 0===e?void 0:e.phone)===u:e}));return null===l||0!==l.length||r?Object(o.jsx)(A.a,{spinning:t,children:Object(o.jsxs)(d.a,{children:[!t&&(null===h||void 0===h?void 0:h.map((function(e){return Object(o.jsx)(j.a,{timeout:500,classNames:"item",children:Object(o.jsx)(I,{contact:e})},e._id)}))),!t&&r&&Object(o.jsx)(D.a,{status:"500",title:"500",subTitle:"Sorry, something went wrong."})]})}):Object(o.jsx)("h4",{children:"Please add a contact"})},V=n(4),T=n(2),q=n(7),R={name:"",email:"",phone:"",type:"personal"},W=function(){var e=Object(a.useState)(R),t=Object(q.a)(e,2),n=t[0],r=t[1],s=Object(p.b)(),c=Object(p.c)((function(e){return e.contact})),i=c.isLoadingContactCreate,l=c.isSuccessContactCreate,u=c.isErrorContactCreate,d=c.isMessageContactCreate,j=c.contactDetails,b=n.name,m=n.email,h=n.phone,g=n.type,f=function(e){return r(Object(T.a)(Object(T.a)({},n),{},Object(V.a)({},e.target.name,e.target.value)))};return Object(a.useEffect)((function(){null!==j&&r(j)}),[j]),Object(a.useEffect)((function(){return l&&(v("success","Success",d),s(C()),r({name:"",email:"",phone:"",type:"personal"})),u&&v("error","Failed",d),function(){return s(N())}}),[l,u,d,s]),Object(o.jsx)(A.a,{spinning:i,children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),s(null===j?y(n):S(n))},children:[Object(o.jsx)("h2",{className:"text-primary",children:j?"Update Contact":"Add Contact"}),Object(o.jsx)("input",{type:"text",placeholder:"Name",name:"name",value:b,onChange:f}),Object(o.jsx)("input",{type:"email",placeholder:"Email",name:"email",value:m,onChange:f}),Object(o.jsx)("input",{type:"text",placeholder:"Phone",name:"phone",value:h,onChange:f}),Object(o.jsx)("h4",{children:"Contact Type"}),Object(o.jsx)("input",{type:"radio",name:"type",value:"personal",checked:"personal"===g,onChange:f})," ","Personal"," ",Object(o.jsx)("input",{type:"radio",name:"type",value:"professional",checked:"professional"===g,onChange:f})," ","Professional",Object(o.jsx)("div",{children:Object(o.jsx)("input",{type:"submit",value:j?"Update Contact":"Add Contact",className:"btn btn-primary btn-block"})})]})})},B=function(){var e=Object(p.b)();return Object(o.jsx)("form",{onSubmit:function(e){return e.preventDefault()},children:Object(o.jsx)("input",{type:"text",placeholder:"Filter Contacts...",onChange:function(t){""!==t.target.value?e(F(t.target.value)):e(F(""))}})})},U=function(){return Object(o.jsxs)("div",{className:"grid-2",children:[Object(o.jsx)("div",{children:Object(o.jsx)(W,{})}),Object(o.jsxs)("div",{children:[Object(o.jsx)(B,{}),Object(o.jsx)(P,{})]})]})},z=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"About This App"}),Object(o.jsx)("p",{className:"my-1",children:"This is a full stack React app for keeping contacts"}),Object(o.jsxs)("p",{className:"bg-dark p",children:[Object(o.jsx)("strong",{children:"Version: "})," 1.0.0"]})]})},_=Object(g.b)("login/authLogin",function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/login",t);case 3:return a=e.sent,e.abrupt("return",a.data.token);case 7:return e.prev=7,e.t0=e.catch(0),c=(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||e.t0.message||e.t0.toString(),e.abrupt("return",n.rejectWithValue(c));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),J=Object(g.b)("signUp/authSignUp",function(){var e=Object(b.a)(h.a.mark((function e(t,n){var a,r,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.post("/signup",t);case 3:return a=e.sent,e.abrupt("return",a.data.token);case 7:return e.prev=7,e.t0=e.catch(0),c=(null===e.t0||void 0===e.t0||null===(r=e.t0.response)||void 0===r||null===(s=r.data)||void 0===s?void 0:s.message)||e.t0.message||e.t0.toString(),e.abrupt("return",n.rejectWithValue(c));case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}()),K=Object(g.c)({name:"authrd",initialState:{isLoading:!1,isSuccess:!1,isError:!1,isMessage:null},reducers:{reset:function(e,t){e.isLoading=!1,e.isSuccess=!1,e.isError=!1,e.isMessage=!1}},extraReducers:function(e){e.addCase(_.pending,(function(e,t){e.isLoading=!0,localStorage.removeItem("token")})).addCase(_.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,localStorage.setItem("token",t.payload)})).addCase(_.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.isMessage=t.payload})).addCase(J.pending,(function(e,t){e.isLoading=!0,localStorage.removeItem("token")})).addCase(J.fulfilled,(function(e,t){e.isLoading=!1,e.isSuccess=!0,localStorage.setItem("token",t.payload)})).addCase(J.rejected,(function(e,t){e.isLoading=!1,e.isError=!0,e.isMessage=t.payload}))}}),G=K.actions.reset,H=K.reducer,Q=function(e){var t=Object(p.c)((function(e){return e.auth})),n=t.isLoading,r=t.isSuccess,s=t.isError,c=t.isMessage,l=Object(p.b)(),u=Object(i.g)();Object(a.useEffect)((function(){return r&&u("/"),s&&v("error","Failed",c),localStorage.getItem("token")?u("/"):function(){return l(G())}}),[s,c,r,l,u]);var d=Object(a.useState)({name:"",email:"",password:"",password2:""}),j=Object(q.a)(d,2),b=j[0],m=j[1],h=b.name,g=b.email,f=b.password,O=b.password2,x=function(e){return m(Object(T.a)(Object(T.a)({},b),{},Object(V.a)({},e.target.name,e.target.value)))};return Object(o.jsx)(A.a,{spinning:n,children:Object(o.jsxs)("div",{className:"form-container",children:[Object(o.jsxs)("h1",{children:["Account ",Object(o.jsx)("span",{className:"text-primary",children:"Register"})]}),Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===h||""===g||""===f?v("info","Please enter all fields"):f!==O?v("error","Failed","Passwords do not match"):l(J({username:h,email:g,password:f,confirmPassword:O}))},children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"name",children:Object(o.jsx)("h3",{children:"Name"})}),Object(o.jsx)("input",{id:"name",type:"text",name:"name",value:h,onChange:x,required:!0})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"email",children:Object(o.jsx)("h3",{children:"Email Address"})}),Object(o.jsx)("input",{id:"email",type:"email",name:"email",value:g,onChange:x,required:!0})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("h3",{children:"Password"})}),Object(o.jsx)("input",{id:"password",type:"password",name:"password",value:f,onChange:x,required:!0,minLength:"6"})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"password2",children:Object(o.jsx)("h3",{children:"Confirm Password"})}),Object(o.jsx)("input",{id:"password2",type:"password",name:"password2",value:O,onChange:x,required:!0,minLength:"6"})]}),Object(o.jsx)("input",{type:"submit",value:"Register",className:"btn btn-primary btn-block"})]})]})})},X=function(){var e=Object(p.c)((function(e){return e.auth})),t=e.isLoading,n=e.isSuccess,r=e.isError,s=e.isMessage,c=Object(p.b)(),l=Object(i.g)();Object(a.useEffect)((function(){return r&&v("error","Failed",s),n&&l("/"),localStorage.getItem("token")?l("/"):function(){return c(G())}}),[r,s,n,c,l]);var u=Object(a.useState)({email:"",password:""}),d=Object(q.a)(u,2),j=d[0],b=d[1],m=j.email,h=j.password,g=function(e){return b(Object(T.a)(Object(T.a)({},j),{},Object(V.a)({},e.target.name,e.target.value)))};return Object(o.jsxs)("div",{className:"form-container",children:[Object(o.jsxs)("h1",{children:["Account ",Object(o.jsx)("span",{className:"text-primary",children:"Login"})]}),Object(o.jsx)(A.a,{spinning:t,children:Object(o.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""===m||""===h?v("error","Failed","Please fill in all fields"):c(_({email:m,password:h}))},children:[Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"email",children:Object(o.jsx)("h3",{children:"Email Address"})}),Object(o.jsx)("input",{id:"email",type:"email",name:"email",value:m,onChange:g,required:!0})]}),Object(o.jsxs)("div",{className:"form-group",children:[Object(o.jsx)("label",{htmlFor:"password",children:Object(o.jsx)("h3",{children:"Password"})}),Object(o.jsx)("input",{id:"password",type:"password",name:"password",value:h,onChange:g,required:!0})]}),Object(o.jsx)("input",{type:"submit",value:"Login",className:"btn btn-primary btn-block"})]})})]})},Y=function(e){var t=e.component,n=localStorage.getItem("token");return Object(o.jsx)(a.Fragment,{children:n?Object(o.jsx)(t,{}):Object(o.jsx)(i.a,{to:"/login"})})},Z=(n(135),n(136),function(){return Object(o.jsx)(c.a,{children:Object(o.jsxs)(a.Fragment,{children:[Object(o.jsx)(u,{}),Object(o.jsx)("div",{className:"container",children:Object(o.jsxs)(i.d,{children:[Object(o.jsx)(i.b,{path:"/",element:Object(o.jsx)(Y,{component:U})}),Object(o.jsx)(i.b,{path:"about",element:Object(o.jsx)(z,{})}),Object(o.jsx)(i.b,{path:"register",element:Object(o.jsx)(Q,{})}),Object(o.jsx)(i.b,{path:"/login",element:Object(o.jsx)(X,{})})]})})]})})}),$=Object(g.a)({reducer:{auth:H,contact:M}});s.a.render(Object(o.jsx)(p.a,{store:$,children:Object(o.jsx)(Z,{})}),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.ea29c65a.chunk.js.map